import{r as d,j as t,C as y,D as f,R as h,c as u,a as j,s as g,b as I,S as k,q as A,Q as l,d as Q,e as D,f as v,g as B,h as w,i as E,k as L,I as C,l as _,u as F,F as P,m as T,n as U,o as M,p as N,t as R,O as W,P as $}from"./index-Cfi514YM.js";const q=e=>d.createElement("svg",{width:14,height:3,viewBox:"0 0 14 3",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M1.11572 1.5C5.80201 1.5 8.42943 1.5 13.1157 1.5",stroke:"#363636",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),O=e=>d.createElement("svg",{width:14,height:15,viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M1.11572 7.50004H13.1157M7.11572 13.5V1.50004",stroke:"#363636",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),b={minus:t.jsx(q,{}),plus:t.jsx(O,{})},p=({sign:e,...n})=>t.jsx(y,{...n,children:b[e]}),G=({children:e,...n})=>t.jsx(f,{...n,children:e}),S=()=>{const e=h(u),[n,s]=j(g),r=o=>n.has(o),c=n.size===e.length;return{isChecked:r,isAllChecked:c,onCheckCartItem:o=>{const a=new Set(n);r(o)?a.delete(o):a.add(o),s(a)},onCheckAllCartItems:()=>{const o=c?new Set:new Set(e.map(a=>a.id));s(o)}}},Y=e=>{const n=I(u),s=I(g),r=()=>{n(i=>i.filter(o=>o.id!==e))},c=()=>{s(i=>(i.delete(e),i))};return{updateCartItems:r,updateSelectedCartItemIds:c,onDeleteItem:async()=>{await k.deleteCartItem(e),r(),c()}}},z=e=>{const[n,s]=j(A(e)),r=()=>{const a=n+1;return a===l.max+1?(alert(`상품의 최대 주문 수량은 ${l.max}개입니다. ${l.max}개 이하로 주문해 주세요.`),n):a},c=()=>{const a=n-1;return a===0?(alert(`상품의 최소 주문 수량은 ${l.min}개입니다. 상품을 삭제하시려면 삭제 버튼을 이용해 주세요.`),n):a},m={minus:c,plus:r},i=a=>{s(a)};return{quantity:n,updateCartItemQuantity:i,getIncreasedQuantity:r,getDecreasedQuantity:c,onUpdateCartItemCount:async a=>{const x=m[a]();await k.patchCartItemCount(e,x),i(x)}}},H=({count:e})=>t.jsx(Q,{children:t.jsxs(D,{children:["현재 ",e,"종류의 상품이 담겨 있습니다."]})}),K=({cartItem:e})=>{const{quantity:n,onUpdateCartItemCount:s}=z(e.id);return t.jsxs(v,{children:[t.jsx(p,{onClick:()=>s("minus"),sign:"minus"}),t.jsx("span",{children:n}),t.jsx(p,{onClick:()=>s("plus"),sign:"plus"})]})},V=()=>{const{isAllChecked:e,onCheckAllCartItems:n}=S(),s=h(u);return t.jsxs(t.Fragment,{children:[t.jsxs(B,{children:[t.jsx(w,{checked:e,onChange:n}),t.jsx(E,{children:"전체 선택"})]}),t.jsx(L,{children:s.map(r=>t.jsx(J,{cartItem:r},r.id))})]})},J=({cartItem:e})=>{const{onDeleteItem:n}=Y(e.id),{isChecked:s,onCheckCartItem:r}=S();return t.jsxs(C,{direction:"column",children:[t.jsxs(C.ItemSelection,{children:[t.jsx(w,{checked:s(e.id),onChange:()=>r(e.id)}),t.jsx(G,{onClick:n,children:"삭제"})]}),t.jsxs(_,{children:[t.jsx(C.ItemImage,{url:e.product.imageUrl}),t.jsx(C.ItemDescription,{name:e.product.name,price:e.product.price,children:t.jsx(K,{cartItem:e})})]})]})},Z=()=>{const e=h(u),{orderPrice:n,shippingPrice:s,totalPrice:r}=F();return t.jsx(t.Fragment,{children:e.length===0?t.jsx(P,{children:"장바구니에 담은 상품이 없습니다."}):t.jsxs(t.Fragment,{children:[t.jsx(H,{count:e.length}),t.jsx("div",{children:t.jsx(T,{children:t.jsx(V,{cartItems:e})})}),t.jsxs(U,{children:[t.jsx(M,{}),t.jsxs(N,{children:["총 주문 금액이 ",R($.freeShippingMinAmount)," 이상일 경우 무료 배송됩니다."]})]}),t.jsx(W,{orderPrice:n,shippingPrice:s,totalPrice:r})]})})};export{Z as default};
